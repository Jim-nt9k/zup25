
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    СклонятьПредставление = Истина;
    Если Параметры.Свойство("Склонения") И ТипЗнч(Параметры.Склонения) = Тип("Соответствие") Тогда
        СклонятьПредставление = Ложь;
		Для каждого стр Из Параметры.Склонения Цикл
        
        	ЭтаФорма[Строка(стр.Ключ)] = стр.Значение;
        
        КонецЦикла;
	КонецЕсли;
	
	Если Параметры.Свойство("ЭтоФИО") Тогда
		ЭтоФИО = Параметры.ЭтоФИО;
    Иначе
        ЭтоФИО = Ложь;
	КонецЕсли;
	
	Если Параметры.Свойство("Пол") Тогда
		Пол = Параметры.Пол;
	КонецЕсли;
	
	Если Параметры.Свойство("Представление") Тогда
		Представление = Параметры.Представление;
        Если СклонятьПредставление Тогда
        
        	 СтруктураСклонения = СклонениеПредставленийОбъектовСервер.СтруктураСклонений();
             Для каждого стр Из СтруктураСклонения Цикл
             
             	ЭтаФорма[стр.ключ] = Представление;
             
             КонецЦикла;
        КонецЕсли;
	КонецЕсли;
    
    
	Если Параметры.Свойство("Объект") Тогда
		ОбъектСклонения = Параметры.Объект;	
        ЭтаФорма.Элементы.ФормаКомандаОК.Доступность = Истина;
	КонецЕсли;   
		
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
    
    ЭтаФорма.Элементы.ФормаКомандаОК.Доступность = ЗначениеЗаполнено(ЭтаФорма.ОбъектСклонения);
    
КонецПроцедуры
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаОтмена(Команда)

    Закрыть(Неопределено);
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОК(Команда)
    
    ЗаписатьРезультатВРегистр();
    Закрыть(Неопределено);
    
КонецПроцедуры

&НаКлиенте
Процедура КомандаПросклонятьПовторно(Команда)
    
     ПросклонятьНаСервере();
    
КонецПроцедуры

&НаСервере
Процедура ПросклонятьНаСервере()

	СтруктураСклонения = СклонениеПредставленийОбъектовСервер.ПросклонятьСПомощьюСервиса(Представление);
    ЗаполнитьЗначенияСвойств(ЭтаФорма,СтруктураСклонения);
    
КонецПроцедуры // ПросклонятьНаСервере()
#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаписатьРезультатВРегистр()
    
    СтруктураСклонения = СклонениеПредставленийОбъектовСервер.СтруктураСклонений();
    ЗаполнитьЗначенияСвойств(СтруктураСклонения,ЭтаФорма);
    
    СклонениеПредставленийОбъектовСервер.ЗаписатьРезультатСклонения(ОбъектСклонения,СтруктураСклонения);
    
КонецПроцедуры // ЗаписатьРезультатВРегистр()
#КонецОбласти

